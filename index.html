<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>DIMDIMSUM</title>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet">
<style>
:root{
  --primary:#c78634;
  --primary-dark:#a8681e;
  --text:#3f2d1d;
  --muted:#7c6753;
  --border:#e8d9c7;
  --bg:#fff8ef;
  --surface:#fffdf8;
}
*{box-sizing:border-box}
body{margin:0;font-family:"Inter",sans-serif;background:radial-gradient(circle at top,#fff8ef 0%,#f7efe6 52%,#f3e8dc 100%);color:var(--text)}
.container{width:min(1120px,92%);margin:auto}
header{background:rgba(255,253,250,.92);border-bottom:1px solid var(--border);position:sticky;top:0;z-index:50;backdrop-filter:saturate(1.1) blur(3px)}
.nav{display:flex;justify-content:space-between;align-items:center;padding:1rem 0;gap:1rem;flex-wrap:wrap}
.brand{font-weight:800;font-size:1.2rem;display:flex;align-items:center;gap:.4rem}
.pill{padding:.4rem .75rem;border-radius:999px;border:1px solid var(--border);font-size:.8rem;color:var(--muted);background:#fff}
.cart-btn{position:relative;cursor:pointer;font-weight:700;background:var(--dark);color:#fff;padding:.55rem .95rem;border-radius:999px}
.cart-count{position:absolute;top:-8px;right:-8px;background:var(--primary);color:#fff;font-size:.75rem;padding:2px 6px;border-radius:999px}
.hero{padding:1.3rem 0 .7rem}
.hero-grid{display:grid;grid-template-columns:2fr 1fr;gap:1rem}
.mini-panel{background:var(--surface);border-radius:14px;padding:.8rem 1rem;border:1px solid var(--border)}
.mini-panel input{border:none;outline:none;width:100%;font-size:1rem;background:transparent}
.grid{display:grid;grid-template-columns:repeat(auto-fill,minmax(260px,1fr));gap:1rem;margin:1rem 0 1.5rem}
.card{background:var(--surface);border-radius:16px;overflow:hidden;box-shadow:0 8px 20px rgba(112,75,36,.08);border:1px solid #f1e4d3;display:flex;flex-direction:column;transform:translateY(12px);opacity:0;animation:cardEnter .45s ease forwards}
.card img{width:100%;height:160px;object-fit:cover}
.card-content{padding:1rem;display:flex;flex-direction:column;gap:.45rem;flex:1}
.card h3{margin:0;font-size:1.05rem}
.meta{color:var(--muted);font-size:.9rem}
.meta-row{display:flex;justify-content:space-between;align-items:center}
.rating{font-weight:700;font-size:.9rem}
.price{font-weight:800;font-size:1.15rem;color:var(--dark)}
.quick{display:flex;justify-content:space-between;align-items:center;font-size:.85rem;color:var(--muted)}
.add-btn{width:100%;padding:.62rem;border:none;border-radius:8px;cursor:pointer;font-weight:700;background:var(--primary);color:#fff;transition:transform .2s ease, box-shadow .2s ease}
.add-btn:hover{background:var(--primary-dark);transform:translateY(-2px);box-shadow:0 8px 18px rgba(167,104,30,.25)}
.social{background:var(--surface);border:1px solid var(--border);border-radius:14px;padding:1rem;margin-bottom:1.5rem}
.social h3{margin:0 0 .6rem}
.social-grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(180px,1fr));gap:.6rem}
.social a{display:block;text-decoration:none;color:#111;border:1px solid var(--border);padding:.6rem .7rem;border-radius:10px;font-weight:600;background:#fafafa}
.social small{color:var(--muted)}
.cart-panel{position:fixed;top:0;right:-420px;width:380px;max-width:95vw;height:100%;background:var(--surface);box-shadow:-5px 0 20px rgba(92,61,29,.16);padding:1rem;transition:.3s;overflow-y:auto;z-index:100}
.cart-panel.open{right:0}
.cart-item{display:grid;grid-template-columns:1fr auto;gap:.3rem;padding:.7rem 0;border-bottom:1px dashed var(--border)}
.cart-item h4{margin:0;font-size:.95rem}
.qty-row{display:flex;gap:.3rem;align-items:center}
.qty-row button{border:1px solid var(--border);background:#fff;padding:.1rem .45rem;border-radius:6px;cursor:pointer}
.total{font-weight:800;margin-top:1rem}
.close-cart{cursor:pointer;font-weight:600;margin-bottom:1rem;display:inline-block}
.checkout-btn{margin-top:.8rem;background:#111;color:#fff;border:none;border-radius:8px;padding:.7rem;width:100%;font-weight:700;cursor:pointer}
.checkout-btn:disabled{opacity:.75;cursor:not-allowed}
.note{font-size:.82rem;color:var(--muted)}
.status{padding:.4rem .7rem;background:#fff4e1;color:#9a6118;border-radius:10px;border:1px solid #f5d5aa;font-size:.82rem;display:inline-block}

.modal-backdrop{position:fixed;inset:0;background:rgba(19,11,3,.5);display:none;align-items:center;justify-content:center;z-index:120}
.modal-backdrop.open{display:flex}
.modal{width:min(520px,92vw);background:var(--surface);border-radius:16px;border:1px solid var(--border);padding:1rem}
.modal h3{margin:.1rem 0 .4rem}
.modal p{margin:.2rem 0 .8rem;color:var(--muted)}
.modal select{width:100%;padding:.55rem;border:1px solid var(--border);border-radius:8px;background:#fff;margin-bottom:.8rem}
.modal-row{display:flex;align-items:center;justify-content:space-between;gap:.8rem;margin-bottom:.8rem}
.modal-qty{display:flex;align-items:center;gap:.4rem}
.modal-qty button{border:1px solid var(--border);background:#fff;border-radius:8px;padding:.2rem .6rem;cursor:pointer;font-size:1rem}
.modal-actions{display:grid;grid-template-columns:1fr 1fr;gap:.6rem}
.ghost-btn{width:100%;padding:.62rem;border:1px solid var(--border);border-radius:8px;cursor:pointer;font-weight:700;background:#fff}

@keyframes cardEnter{to{transform:translateY(0);opacity:1}}
@media (max-width:900px){.hero-grid{grid-template-columns:1fr}}
</style>
</head>
<body>
<header>
  <div class="container nav">
    <div class="brand">üçΩÔ∏è DIMDIMSUM <span class="pill">Live delivery mode</span></div>
    <div style="display:flex;align-items:center;gap:.7rem;flex-wrap:wrap">
      <div class="cart-btn" onclick="toggleCart()">üõí Order <span class="cart-count" id="cartCount">0</span></div>
    </div>
  </div>
</header>
<main class="container">
  <section class="hero">
    <h1>Signature Foods by DIMDIMSUM</h1>
    <p>A curated menu with our two best-selling signature dishes. Built to help customers choose quickly and order confidently.</p>
    <div><span class="status">Today only: Burger House & Green Bowl</span></div>
    <div class="hero-grid">
      <div>
        <div class="status">Today only: Burger House & Green Bowl</div>
      </div>
      <div class="mini-panel">
        <strong>Delivery details</strong>
        <div style="height:.55rem"></div>
        <input id="customerNameInput" placeholder="Enter your WhatsApp name" value="">
        <div style="height:.45rem"></div>
        <input id="addressInput" placeholder="Enter detailed address" value="">
        <div style="height:.55rem"></div>
        <span class="status" id="etaStatus">Estimated arrival: 30 mins</span>
      </div>
    </div>
  </section>

  <section class="grid" id="foodGrid"></section>

  <section class="social">
    <h3>Connect your shop to social channels</h3>
    <div class="social-grid">
      <a href="https://www.tiktok.com/@freshbite" target="_blank" rel="noopener noreferrer">üéµ Connect TikTok<br><small>Promote menu videos & live selling.</small></a>
      <a href="https://www.instagram.com/freshbite" target="_blank" rel="noopener noreferrer">üì∏ Connect Instagram<br><small>Share reels, stories, and catalog.</small></a>
      <a href="https://wa.me/6289504378484" target="_blank" rel="noopener noreferrer">üí¨ Connect WhatsApp<br><small>Receive order chat and customer support.</small></a>
    </div>
  </section>
</main>

<div class="modal-backdrop" id="foodModal" onclick="closeFoodModal()">
  <div class="modal" onclick="event.stopPropagation()">
    <h3 id="modalFoodName"></h3>
    <p id="modalFoodDesc"></p>
    <label for="variantSelect"><strong>Variant</strong></label>
    <select id="variantSelect" onchange="updateModalPrice()"></select>
    <div class="modal-row">
      <div class="modal-qty">
        <button onclick="changeModalQty(-1)">-</button>
        <strong id="modalQty">1</strong>
        <button onclick="changeModalQty(1)">+</button>
      </div>
      <strong id="modalPrice"></strong>
    </div>
    <div class="modal-actions">
      <button class="ghost-btn" onclick="closeFoodModal()">Cancel</button>
      <button class="add-btn" onclick="confirmAddFromModal()">Add to cart</button>
    </div>
  </div>
</div>

<div class="cart-panel" id="cartPanel">
  <div class="close-cart" onclick="toggleCart()">‚Üê Close</div>
  <h3>Your order</h3>
  <div id="cartItems"></div>
  <div class="total" id="cartTotal">Total: $0</div>
  <button class="checkout-btn" id="checkoutBtn" onclick="checkoutViaWhatsApp()">Place order (auto WhatsApp)</button>
  <p class="note" id="checkoutNote">Tip: fill in your WhatsApp name and detailed address before checkout so your order message is complete.</p>
</div>

<script>
const menuData = [
  {
    id:1,
    name:"Burger House",
    category:"Burger",
    description:"Juicy grilled beef patty with lettuce, tomato, and house sauce on a toasted brioche bun.",
    price:20,
    rating:4.7,
    eta:20,
    orders:320,
    img:"https://images.unsplash.com/photo-1600891964599-f61ba0e24092",
    variants:[
      {name:"Regular", priceDelta:0},
      {name:"Double Patty", priceDelta:6}
    ]
  },
  {
    id:2,
    name:"Green Bowl",
    category:"Healthy",
    description:"Fresh greens, avocado, quinoa, and crunchy toppings with a light citrus dressing.",
    price:10,
    rating:4.9,
    eta:22,
    orders:280,
    img:"https://images.unsplash.com/photo-1546069901-ba9599a7e63c",
    variants:[
      {name:"Classic", priceDelta:0},
      {name:"Extra Avocado", priceDelta:3}
    ]
  }
];

let cart = [];
let selectedFood = null;
let modalQuantity = 1;
const USD_TO_IDR = 1000;

function formatIDRFromUSD(usdAmount){
  const idrAmount = Math.round(usdAmount * USD_TO_IDR);
  return new Intl.NumberFormat("id-ID", { style: "currency", currency: "IDR", maximumFractionDigits: 0 }).format(idrAmount);
}

function getFoods(){
  return [...menuData];
}

function renderItems(){
  const grid = document.getElementById("foodGrid");
  grid.innerHTML = "";
  getFoods().forEach(food => {
    grid.innerHTML += `
      <div class="card">
        <img src="${food.img}" alt="${food.name}">
        <div class="card-content">
          <div class="featured-label">Signature Dish</div><h3>${food.name}</h3>
          <div class="meta-row">
            <div class="meta">${food.category} ‚Ä¢ ${food.eta} min</div>
            <div class="rating">‚≠ê ${food.rating}</div>
          </div>
          <div class="meta">${food.description}</div>
          <div class="quick">${food.orders}+ orders this week <span class="price">${formatIDRFromUSD(food.price)}</span></div>
          <button class="add-btn" onclick="openFoodModal(${food.id})">Choose variant & quantity</button>
        </div>
      </div>
    `;
  });
  updateEta();
}

function openFoodModal(foodId){
  selectedFood = menuData.find(item => item.id === foodId);
  if(!selectedFood) return;
  modalQuantity = 1;
  document.getElementById("modalFoodName").innerText = selectedFood.name;
  document.getElementById("modalFoodDesc").innerText = selectedFood.description;

  const variantSelect = document.getElementById("variantSelect");
  variantSelect.innerHTML = selectedFood.variants
    .map(variant => `<option value="${variant.name}">${variant.name} (${formatIDRFromUSD(selectedFood.price + variant.priceDelta)})</option>`)
    .join("");

  document.getElementById("modalQty").innerText = modalQuantity;
  updateModalPrice();
  document.getElementById("foodModal").classList.add("open");
}

function closeFoodModal(){
  document.getElementById("foodModal").classList.remove("open");
}

function changeModalQty(delta){
  modalQuantity = Math.max(1, modalQuantity + delta);
  document.getElementById("modalQty").innerText = modalQuantity;
  updateModalPrice();
}

function updateModalPrice(){
  if(!selectedFood) return;
  const selectedVariantName = document.getElementById("variantSelect").value;
  const selectedVariant = selectedFood.variants.find(v => v.name === selectedVariantName) || selectedFood.variants[0];
  const unitPrice = selectedFood.price + selectedVariant.priceDelta;
  document.getElementById("modalPrice").innerText = `${formatIDRFromUSD(unitPrice)} each`;
}

function confirmAddFromModal(){
  if(!selectedFood) return;
  const selectedVariantName = document.getElementById("variantSelect").value;
  const selectedVariant = selectedFood.variants.find(v => v.name === selectedVariantName) || selectedFood.variants[0];
  const unitPrice = selectedFood.price + selectedVariant.priceDelta;
  const key = `${selectedFood.id}-${selectedVariant.name}`;
  const existing = cart.find(item => item.key === key);

  if(existing){
    existing.qty += modalQuantity;
  } else {
    cart.push({
      key,
      name:`${selectedFood.name} (${selectedVariant.name})`,
      price:unitPrice,
      qty:modalQuantity
    });
  }

  closeFoodModal();
  updateCart();
}

function changeQtyByIndex(index, delta){
  const item = cart[index];
  if(!item) return;
  item.qty += delta;
  if(item.qty <= 0){
    cart.splice(index, 1);
  }
  updateCart();
}

function updateCart(){
  const cartItems = document.getElementById("cartItems");
  const cartCount = document.getElementById("cartCount");
  const cartTotal = document.getElementById("cartTotal");
  cartItems.innerHTML = "";
  let total = 0;
  let count = 0;

  cart.forEach((item, index) => {
    const lineTotal = item.qty * item.price;
    total += lineTotal;
    count += item.qty;
    cartItems.innerHTML += `
      <div class="cart-item">
        <div>
          <h4>${item.name}</h4>
          <div class="note">${formatIDRFromUSD(item.price)} each</div>
        </div>
        <div style="text-align:right">
          <div><strong>${formatIDRFromUSD(lineTotal)}</strong></div>
          <div class="qty-row">
            <button onclick="changeQtyByIndex(${index},-1)">-</button>
            <span>${item.qty}</span>
            <button onclick="changeQtyByIndex(${index},1)">+</button>
          </div>
        </div>
      </div>
    `;
  });

  if(!cart.length){
    cartItems.innerHTML = '<p class="note">Your cart is empty. Add dishes to start checkout.</p>';
  }

  cartCount.innerText = count;
  cartTotal.innerText = `Total: ${formatIDRFromUSD(total)}`;
}

function updateEta(){
  const avgEta = Math.round(menuData.reduce((sum, food) => sum + food.eta, 0) / menuData.length);
  document.getElementById("etaStatus").innerText = `Estimated arrival: ${avgEta} mins`;
}

function checkoutViaWhatsApp(){
  if(!cart.length){
    alert("Your cart is still empty.");
    return;
  }

  const checkoutBtn = document.getElementById("checkoutBtn");
  const checkoutNote = document.getElementById("checkoutNote");
  const customerName = document.getElementById("customerNameInput").value.trim();
  const address = document.getElementById("addressInput").value.trim();

  if(!customerName || !address){
    alert("Please enter your WhatsApp name and detailed address before checkout.");
    return;
  }

  const total = cart.reduce((sum, item) => sum + item.qty * item.price, 0);
  const orderText = [
    "Hi FreshBite!",
    "I want to order:",
    ...cart.map(item => `- ${item.name} x${item.qty} (${formatIDRFromUSD(item.qty * item.price)})`),
    "",
    `Total: ${formatIDRFromUSD(total)}`,
    `Name: ${customerName}`,
    `Detailed Address: ${address}`,
    "Ordered from FreshBite web app."
  ].join("\n");

  const whatsappNumber = "6289504378484";
  const whatsappUrl = `https://wa.me/${whatsappNumber}?text=${encodeURIComponent(orderText)}`;

  checkoutBtn.disabled = true;
  checkoutBtn.innerText = "Redirecting to WhatsApp...";
  checkoutNote.innerText = "Opening WhatsApp automatically so you can send your order now.";

  setTimeout(() => {
    window.location.href = whatsappUrl;
  }, 350);
}

function toggleCart(){
  document.getElementById("cartPanel").classList.toggle("open");
}

renderItems();
updateCart();
</script>
</body>
</html>
